20111103
=========
1，目前需要确认的问题，如下：
安san，早上好，
1）问题：
对于“5.PFX-4486@JIRA：Diablo（メディアの方）のバージョンアップの実現 ”，
麻烦向客户确认一下是否一定要通过使用文件系统方式，管理和更新flash上的数据？

2）缘由：
如果使用文件系统，那么会耗费额外flash存储空间，并影响启动和读写速度。
而且，只是更新NBL以及ramdisk等数据的时候，按照以前方式，是只通过字符设备 接口，直接烧写到指定偏移，并不需要文件系统进行管理，同时这也支持两片 flash更新，因此我们认为不必要用文件系统，麻烦向客户确认一下。

谢谢！^_^

以上，吕凯
2011年11月3日 

2，预测将要做的工作大致如下：
1）在已有的sfmem.c驱动文件中进行修改，让它可以支持两个flash设备。
目前的情况是，这个驱动虽然也通过片选可以支持两个flash片子设备，但是两个片子却是通过两个设备文件来表示的。也就是，一次只能打开一个设备文件并使用其中的一个片子。并没有达到真正两个片子16*2M的空间。
2) 寻找一个测试方式。
3）用户空间只需指定特定地址写入。（调用标准的read和write接口，或者ioctl更快）

3，其他的问题：
如果超过了16M，在操作系统内可以识别，但是NBL如何能够识别两个flash片子的32M也可以当做一个片子使用？也就是，两个片子中的数据如果超过了16M，并且其中数据可能影响启动的话，需要NBL支持。

20111031
=========
总结一下目前的问题：
1）当前驱动的测试。sfmem已有一个可用的char驱动，可以在avp13板上运行，但是有待测试。
2）改写驱动。sfmem在avp17上面应该至少支持两个片子。要么修改char支持两个片子，要么修改成block类型（原因不明）。
3）还没有测试的环境，并且对于驱动添加方法，以及驱动相关知识还不了解。


20111027
=========
下午和日本BSE开会，解决QA问题。大致记录内容如下：
version upgrade的过程大致如下：
1)EMMA侧从sd卡将所有的更新包拷贝过来。
2）EMMA和Diablo将模式设置为recover模式
3）各个部分都重新启动起来。
4）EMMA将刚才拷贝的更新包进行处理，再通过SPI等发送给各个设备（例如Diablo）的Feature（会通过mind）。
5）对于Diablo，Feature将从EMMA发送过来的数据接收，然后控制更新，更新得内容再写到（SPI FLASH）的相应部分。
综上，目前应当做的就是第5）步，写SPI FLASH需要一个驱动，可以是字符也可以是块，只要做出来就行。所写的地址没有确定，但是对于使用NBL的，例如Diablo和FakeDiablo应该使写到一个分区中。
对于SPI Flash的驱动，diablo上面是大小16M，型号Winbond，两块。
我们先用avp13来进行测试。

沟通方接口：
EMMA--周海龙 \
DIABLO--吕凯   <----->BSE
Feature ...  /


20111026
=========
http://10.1.3.250:8090/pages/viewpage.action?pageId=19759544
>     PFX-4486@JIRA：Diablo（メディアの方）のバージョンアップの実現

点一下链接里面还有些介绍，目前就这些了。
https://www.tool.sony.biz/confluence/pages/viewpage.action?pageId=102466094#
这个里面的已经下载到html_20111027
